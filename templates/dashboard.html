{% extends "layout.html" %}
{% block body %}

<style>
    form {
        max-width: 400px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    /* Heading Style */
    h3 {
        color: #333;
    }

    /* Select Box Style */
    select {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #fff;
    }

    /* Submit Button Style */
    #submit {
        display: block;
        margin-top: 10px;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    #submit:hover {
        background-color: #0056b3;
    }

    /* Add Student Button Style */
    a button {
        display: block;
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        text-decoration: none;
    }

    a button:hover {
        background-color: #0056b3;
    }
</style>


<div>
    <form action="/get-section" method="POST">

        <div>
            <h3>Select Student Department</h3>
            <select id="deptSelect" name="dept">
                <option value="" disabled selected>Select Department</option>
                {% for i in department_courses %}
                    {% for j in i %}
                        <option value="{{ j }}">{{ j }}</option>
                    {% endfor %}
                {% endfor %}
            </select>
        </div>
        <div id="sectionDropdown" style="display: none;">
            <h3>Select Student Level</h3>
            <select id="yearSelect" name="year">
                <option value="" disabled selected>Select Year</option>
                {% for i in department_years %}
                    {% for j in i %}
                        <option value="{{ j }}">{{ j }}</option>
                    {% endfor %}
                {% endfor %}
            </select>
        </div>
            
        <div id="sectionDropdown1" style="display: none;">
            <h3>Select a Section</h3>
            <select name="section">
                <option value="" disabled selected>Select Section</option>
                {% for i in department_sections %}
                    {% for j in i %}
                        <option value="{{ j }}">{{ j }}</option>
                    {% endfor %}
                {% endfor %}
            </select>
        </div>

        <input type="submit" id="submit" value="Submit" style="display: none;">
    </form>
</div>
<br>




{% block javascript %}
<script>
    $(document).ready(function () {
        $('#deptSelect').change(function () {
            $('#sectionDropdown').show();
            $('#yearSelect').change(function () {
                var selectedYear = $(this).val();
                console.log('Year selected: ' + selectedYear); // Add this line for debugging
                if (selectedYear) {
                    $('#sectionDropdown1').show();
                    $('#submit').prop('disabled', false).show();
                    var sectionOptions = "";
                    switch (selectedYear) {
                        case "1st":
                            sectionOptions = '<option value="1a1">1a1</option><option value="1a2">1a2</option><option value="1a3">1a3</option><option value="1a4">1a4</option>';
                            break;
                        case "2nd":
                            sectionOptions = '<option value="2a1">2a1</option><option value="2a2">2a2</option><option value="2a3">2a3</option><option value="2a4">2a4</option>';
                            break;
                        case "3rd":
                            sectionOptions = '<option value="3a1">3a1</option><option value="3a2">3a2</option><option value="3a3">3a3</option><option value="3a4">3a4</option>';
                            break;
                        case "4th":
                            sectionOptions = '<option value="4a1">4a1</option><option value="4a2">4a2</option><option value="4a3">4a3</option><option value="4a4">4a4</option>';
                            break;
                        default:
                            sectionOptions = '<option value="" disabled selected>Select Section</option>';
                    }
                    $('select[name="section"]').html(sectionOptions);
                } else {
                    $('#sectionDropdown').hide();
                    $('#submit').prop('disabled', true).hide();
                }
            });
        });
    });
</script>
    {% endblock %}
{% endblock %}
